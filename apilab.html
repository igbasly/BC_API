<!DOCTYPE html>
<html>
<title>BC API - BCLab</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fetch-jsonp/1.0.6/fetch-jsonp.min.js"></script>

<script>
    function setResponse(url, text) {
        let resp = document.getElementById("response");
        let urlText = document.getElementById("url");
        const str = PR.prettyPrintOne(text);
        resp.innerHTML = str;
        urlText.innerText = url;
        if (url != 'https://bc.horariomaker.com/api/v3?') {
            urlText.href = url;
        } else{
            urlText.href = "";
        };
    };

    async function fetchData() {
      const resp = await fetch("https://bc.horariomaker.com/api/v3/parametros").then(response => response.json());
      const params = resp["data"]["parametros"]
      console.log(params);
      Object.keys(params).map((key) => {
        const select = document.getElementsByName(key)[0];
        for (let i=0; i < params[key].length; i++) {
          const op = params[key][i];
          const option = document.createElement("option");
          option.value = op["value"];
          option.innerHTML = op["name"];
          select.appendChild(option);
      };
      })
    }
</script>

<body class="w3-content" style="max-width:1300px;">

<!-- First Grid: Logo & About -->
<div class="w3-row" style="height: 100vh;">
    <div class="w3-half w3-container w3-center" style="background-color: #267CB9; min-height: 100%;">
        <div class="w3-padding-64">
            <h1 class="w3-text-white">BuscaCursos API Lab</h1>
            <form class="w3-container w3-card w3-white" onsubmit="callAPI().then(data => setResponse(data[0], data[1])); return false;" id="form">
                <div class="w3-row-padding">
                    <div class="w3-half">
                <div class="w3-section">
                    <label class="w3-left">Semestre:</label>
                    <select class="w3-select" name="semestre">
                    </select>
                </div>
                <div class="w3-section">
                    <label class="w3-left">Sigla:</label>
                    <input class="w3-input" style="width:100%;" type="text" name="sigla" placeholder="Sigla">
                </div>
                <div class="w3-section">
                    <label class="w3-left">NRC:</label>
                    <input class="w3-input" style="width:100%;" type="number" name="nrc" placeholder="NRC">
                </div>
                <div class="w3-section">
                    <label class="w3-left">Nombre:</label>
                    <input class="w3-input" style="width:100%;" type="text" name="nombre" placeholder="Nombre">
                </div>
                <div class="w3-section">
                    <label class="w3-left">Profesor:</label>
                    <input class="w3-input" style="width:100%;" type="text" name="profesor" placeholder="Profesor">
                </div>
                    </div>
                    <div class="w3-half">
                        <div class="w3-section">
                            <label class="w3-left">Categoría:</label>
                            <select class="w3-select"       name="categoria">
                            </select>
                        </div>
                        <div class="w3-section">
                            <label class="w3-left">Campus:</label>
                            <select class="w3-select" name="campus">
                            </select>
                        </div>
                        <div class="w3-section">
                            <label class="w3-left">Unidad Académica:</label>
                            <select class="w3-select" name="unidad_academica">
                            </select>
                        </div>
                        <div class="w3-section">
                          <label class="w3-left">Formacion General:</label>
                          <select class="w3-select" name="formacion_general">
                          </select>
                      </div>
                      <div class="w3-section">
                        <label class="w3-left">Formato:</label>
                        <select class="w3-select" name="formato">
                        </select>
                    </div>
                        <div class="w3-section">
                            <input class="w3-check" id="vac" type="checkbox" value="true"    name="vacantes">
                            <label class="w3-left">Vacantes</label>

                        </div>
                        <div class="w3-section">
                            <input class="w3-check" id="req"        type="checkbox" value="true"    name="requisitos">
                            <label class="w3-left">Requisitos</label>
                        </div>
                        <button type="submit" class="w3-button w3-teal w3-right">Enviar</button>
                        <button type="reset" class="w3-button w3-gray">Limpiar</button>
                    </div>
                    
                    
                </div>
            </form>
        </div>
    </div>
    <div class="w3-half w3-container">
    <div class="w3-padding-64 w3-center">
      <h2>Respuesta</h2>
      <div class="w3-container w3-card w3-text-white" style="background-color: #267CB9;">
        <h4 style="text-align: left;">URL:</h4>
        <h6 class="w3-white" style="text-align: left;"><a href="" id="url">https://bc.horariomaker.com/api/v3?</a></h6>
        
        <h4  style="text-align: left;">Response:</h4>
        <pre class="w3-white" style="text-align: justify; overflow: scroll; height: 45vh;"><code class="prettyprint lang-json"  id="response"> {} </code></pre>
      </div>
    </div>
    </div>
    
</div>
</body>
<script src="script_dev.js"></script>
<script>
  fetchData();
</script>
</html>

